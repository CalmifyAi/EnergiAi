<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SmartSaver AI - Account & Subscription</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f5f5f5; color:#333; }
header { background:#0071dc; color:white; padding:20px; text-align:center; }
header h1 { margin:0; }
header p { margin:5px 0 0; }

/* ACCOUNT SECTION */
.section { max-width:1200px; margin:20px auto; padding:20px; background:#fff; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.1);}
.section h2 { color:#0071dc; margin-bottom:15px; }
input { padding:10px; margin:5px 0 15px; width:100%; border:1px solid #ccc; border-radius:5px; }
button { padding:10px; background:#0071dc; color:white; border:none; border-radius:5px; cursor:pointer; transition:0.3s; }
button:hover { background:#005bb5; }
.cards-grid { display:flex; flex-wrap:wrap; justify-content:flex-start; }

/* CARD STYLE */
.card { background:white; padding:15px; margin:10px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); flex-direction:column; width:250px; transition:0.3s; }
.card:hover { box-shadow:0 5px 15px rgba(0,0,0,0.2); }
.card h3 { margin:0; font-size:1.1em; }
.card p { margin:5px 0; }
.card .badge { background:#ff9800; color:white; padding:2px 6px; border-radius:4px; font-size:0.8em; margin-right:5px; }

.locked { filter: blur(2px); pointer-events: none; opacity:0.6; }
.unlock-msg { background:#ffefc4; padding:10px; border-radius:5px; margin:10px 0; }
</style>
</head>
<body>

<header>
  <h1>SmartSaver AI</h1>
  <p>AI Travel, Car, Grocery Optimization â€” Account Required</p>
</header>

<!-- ACCOUNT SECTION -->
<div class="section" id="accountSection">
  <h2>Account & Subscription</h2>
  <div id="signupDiv">
    <h3>Sign Up (Free Trial)</h3>
    <input type="email" id="signupEmail" placeholder="Email">
    <input type="password" id="signupPass" placeholder="Password">
    <button onclick="signup()">Sign Up</button>
  </div>

  <div id="loginDiv">
    <h3>Login</h3>
    <input type="email" id="loginEmail" placeholder="Email">
    <input type="password" id="loginPass" placeholder="Password">
    <button onclick="login()">Login</button>
  </div>

  <div id="accountStatus"></div>
</div>

<!-- TRAVEL SECTION -->
<div class="section" id="travelSection">
  <h2>Travel Deals</h2>
  <div id="travelControls">
    <input type="text" id="destination" placeholder="Destination">
    <input type="date" id="travelDate">
    <button onclick="generateTravel()">Generate Travel Options</button>
  </div>
  <div id="travelOutput" class="cards-grid locked"></div>
  <div id="travelLockMsg" class="unlock-msg" style="display:none;">
    Your trial has expired. <a href="https://www.paypal.com/paypalme/YOURLINK" target="_blank">Subscribe to unlock</a>
  </div>
</div>

<!-- CAR SECTION -->
<div class="section" id="carSection">
  <h2>Car Appointments</h2>
  <div id="carControls">
    <input type="text" id="carModel" placeholder="Car Model">
    <input type="text" id="serviceType" placeholder="Service Type">
    <button onclick="generateCar()">Generate Car Appointments</button>
  </div>
  <div id="carOutput" class="cards-grid locked"></div>
  <div id="carLockMsg" class="unlock-msg" style="display:none;">
    Your trial has expired. <a href="https://www.paypal.com/paypalme/YOURLINK" target="_blank">Subscribe to unlock</a>
  </div>
</div>

<!-- GROCERY SECTION -->
<div class="section" id="grocerySection">
  <h2>Grocery Deals</h2>
  <div id="groceryControls">
    <input type="text" id="groceryList" placeholder="Items (comma separated)">
    <input type="number" id="groceryBudget" placeholder="Budget">
    <button onclick="generateGrocery()">Generate Grocery Plan</button>
  </div>
  <div id="groceryOutput" class="cards-grid locked"></div>
  <div id="groceryLockMsg" class="unlock-msg" style="display:none;">
    Your trial has expired. <a href="https://www.paypal.com/paypalme/YOURLINK" target="_blank">Subscribe to unlock</a>
  </div>
</div>

<script>
// ACCOUNT SYSTEM
let accounts = JSON.parse(localStorage.getItem('accounts') || '{}');
let currentUser = null;

function signup(){
  const email = document.getElementById('signupEmail').value;
  const pass = document.getElementById('signupPass').value;
  if(!email || !pass){ alert("Enter email & password"); return; }
  if(accounts[email]){ alert("Account already exists"); return; }

  const trialDays = 7;
  const expiry = new Date();
  expiry.setDate(expiry.getDate() + trialDays);

  accounts[email] = { password: pass, trialExpiry: expiry.toISOString(), paid: false };
  localStorage.setItem('accounts', JSON.stringify(accounts));
  alert(`Account created! Free trial until ${expiry.toDateString()}`);
}

function login(){
  const email = document.getElementById('loginEmail').value;
  const pass = document.getElementById('loginPass').value;
  if(!accounts[email] || accounts[email].password !== pass){
    alert("Invalid credentials"); return;
  }
  currentUser = email;
  updateAccess();
}

function updateAccess(){
  if(!currentUser) return;
  const account = accounts[currentUser];
  const now = new Date();
  const trialExpiry = new Date(account.trialExpiry);

  const sections = [
    {cards:"#travelOutput", msg:"#travelLockMsg"},
    {cards:"#carOutput", msg:"#carLockMsg"},
    {cards:"#groceryOutput", msg:"#groceryLockMsg"}
  ];

  if(account.paid || now <= trialExpiry){
    document.getElementById('accountStatus').innerHTML = `
      <p>Welcome, ${currentUser}!</p>
      <p>${account.paid ? "Paid Subscriber" : "Free Trial Active until " + trialExpiry.toDateString()}</p>
      <p>You can now access the AI features.</p>`;
    sections.forEach(s=>{
      document.querySelector(s.cards).classList.remove('locked');
      document.querySelector(s.msg).style.display = 'none';
    });
  } else {
    document.getElementById('accountStatus').innerHTML = `
      <p>Your trial has expired!</p>
      <p>Please <a href="https://www.paypal.com/paypalme/YOURLINK" target="_blank">subscribe now</a> to continue using the website.</p>`;
    sections.forEach(s=>{
      document.querySelector(s.cards).classList.add('locked');
      document.querySelector(s.msg).style.display = 'block';
    });
  }
}

// AI Simulation Helpers
function randomPrice(min,max){ return (Math.random()*(max-min)+min).toFixed(2); }
function randomBadge(){ const badges = ["Best Value","Cheapest","Fastest","Limited Deal"]; return badges[Math.floor(Math.random()*badges.length)]; }

// TRAVEL
function generateTravel(){
  if(!currentUser) { alert("Please login first"); return; }
  const account = accounts[currentUser];
  if(!account.paid && new Date() > new Date(account.trialExpiry)) return;
  const dest = document.getElementById('destination').value;
  const date = document.getElementById('travelDate').value;
  const types = ["Flight","Hotel","Train","Bus"];
  let outputHTML = '';
  types.forEach(t=>{ outputHTML += `<div class="card"><h3>${t} to ${dest} <span class="badge">${randomBadge()}</span></h3><p>Date: ${date}</p><p>Price: $${randomPrice(50,400)}</p><button>Book</button></div>`; });
  document.getElementById('travelOutput').innerHTML = outputHTML;
}

// CAR
function generateCar(){
  if(!currentUser) { alert("Please login first"); return; }
  const account = accounts[currentUser];
  if(!account.paid && new Date() > new Date(account.trialExpiry)) return;
  const model = document.getElementById('carModel').value;
  const service = document.getElementById('serviceType').value;
  const times = ["9:00AM","11:00AM","1:00PM","3:00PM","5:00PM"];
  let outputHTML = '';
  times.forEach(t=>{ outputHTML += `<div class="card"><h3>${service} for ${model} <span class="badge">${randomBadge()}</span></h3><p>Time: ${t}</p><p>Price: $${randomPrice(50,200)}</p><button>Book</button></div>`; });
  document.getElementById('carOutput').innerHTML = outputHTML;
}

// GROCERY
function generateGrocery(){
  if(!currentUser) { alert("Please login first"); return; }
  const account = accounts[currentUser];
  if(!account.paid && new Date() > new Date(account.trialExpiry)) return;
  const items = document.getElementById('groceryList').value.split(',').map(i=>i.trim());
  const budget = Number(document.getElementById('groceryBudget').value);
  let total = 0;
  let outputHTML = '';
  items.forEach(i=>{
    const price = parseFloat(randomPrice(1,10));
    total += price;
    const badge = Math.random()>0.7 ? `<span class="badge">On Sale!</span>` : '';
    outputHTML += `<div class="card"><h3>${i} ${badge}</h3><p>Price: $${price}</p><button>Add to Cart</button></div>`;
  });
  outputHTML += `<div style="width:100%; padding:10px;"><b>Total: $${total.toFixed(2)} / Budget: $${budget}</b></div>`;
  document.getElementById('groceryOutput').innerHTML = outputHTML;
}
</script>
</body>
</html>
